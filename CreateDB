CREATE TABLE Users (
    user_id SERIAL PRIMARY KEY,
    username varchar(30) UNIQUE NOT NULL,
    hashed_password varchar(100) NOT NULL,
    created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Chat_Group (
    chat_id serial PRIMARY KEY,
    owner_id INTEGER REFERENCES Users(user_id),
    name varchar(20) NOT NULL
);

CREATE TABLE Chat_Members (
    chat_id INTEGER REFERENCES Chat_Group(chat_id),
    user_id INTEGER REFERENCES Users(user_id)
);

CREATE TABLE Parcels (
    parcels_id serial PRIMARY KEY,
    chat_id INTEGER REFERENCES Chat_Group(chat_id),
    user_id INTEGER REFERENCES Users(user_id),
    created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Photos (
    image bytea not null,
    caption varchar(1000) not null
) INHERITS(Parcels);

CREATE TABLE Messages (
    content varchar(1000) not null
) INHERITS(Parcels);

CREATE TABLE Replies (
    reply_to INTEGER REFERENCES Parcels(parcels_id)
) INHERITS(Parcels);

CREATE TABLE Photo_Likes(
    parcels_id INTEGER REFERENCES Parcels(parcels_id),
    user_id INTEGER REFERENCES Users(user_id)
);

CREATE TABLE Contacts(
    owner_id Integer REFERENCES  Users(user_id),
    contact_id Integer REFERENCES Users(user_id)
);

CREATE TABLE Hashtags(
    hashtag varchar(50) not null,
    user_id Integer REFERENCES Users(user_id),
    parcels_id Integer references Parcels(parcels_id)
);

CREATE TABLE UserAuth(
    auth_id SERIAL PRIMARY_KEY,
    revoked_token varchar(200),
    user_id INTEGER REFERENCES Users(user_id)
);
