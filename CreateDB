CREATE TABLE Users (
    uid SERIAL PRIMARY KEY,
    username varchar(30) UNIQUE NOT NULL,
    password varchar(100) NOT NULL,
    created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    email varchar(100) UNIQUE NOT NULL,
    first_name varchar(30) NOT NULL,
    last_name varchar(30) NOT NULL,
    phone_number varchar(10) NOT NULL
);

CREATE TABLE Chat_Group (
    cid serial PRIMARY KEY,
    owner_id INTEGER REFERENCES Users(uid),
    name varchar(20) NOT NULL
);

CREATE TABLE Chat_Members (
    cid INTEGER REFERENCES Chat_Group(cid),
    uid INTEGER REFERENCES Users(uid),
    joined_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Messages (
    mid serial PRIMARY KEY,
    cid INTEGER REFERENCES Chat_Group(cid),
    uid INTEGER REFERENCES Users(uid),
    created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Multimedia (
    image BYTEA NOT NULL,
    mid INTEGER REFERENCES Messages(mid)
);

CREATE TABLE Replies (
    replied_to INTEGER REFERENCES Messages(mid),
    reply INTEGER REFERENCES Messages(mid)
);



CREATE TABLE Likes(
    mid INTEGER REFERENCES Messages(mid),
    uid INTEGER REFERENCES Users(uid),
    upvote BOOLEAN NOT NULL
);

CREATE TABLE Contacts(
    owner_id Integer REFERENCES  Users(uid),
    contact_id Integer REFERENCES Users(uid)
);

CREATE TABLE Hashtags(
    hashtag varchar(50) not null,
    uid Integer REFERENCES Users(uid),
    mid Integer REFERENCES Messages(mid)
);
